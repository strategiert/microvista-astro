---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Breadcrumbs from '../../components/layout/Breadcrumbs.astro';

import { localePath, type Locale } from '../../i18n/translations';
const locale = (Astro.locals.locale || 'de') as Locale;
const lp = (path: string) => localePath(path, locale);

const services = [
  {
    slug: 'ct-labor',
    name: { de: 'CT-Labor', en: 'CT Laboratory', fr: 'Laboratoire CT', es: 'Laboratorio CT', it: 'Laboratorio CT' },
    desc: {
      de: 'Hochauflösende CT-Scans in unserem zertifizierten Labor.',
      en: 'High-resolution CT scans in our certified laboratory.',
      fr: 'Scans CT haute résolution dans notre laboratoire certifié.',
      es: 'Escaneos CT de alta resolución en nuestro laboratorio certificado.',
      it: 'Scansioni CT ad alta risoluzione nel nostro laboratorio certificato.'
    },
  },
  {
    slug: 'ct-datenauswertung',
    name: { de: 'CT-Datenauswertung', en: 'CT Data Analysis', fr: 'Analyse des données CT', es: 'Análisis de datos CT', it: 'Analisi dati CT' },
    desc: {
      de: 'Professionelle Auswertung Ihrer CT-Scandaten.',
      en: 'Professional analysis of your CT scan data.',
      fr: 'Analyse professionnelle de vos données de scan CT.',
      es: 'Análisis profesional de sus datos de escaneo CT.',
      it: 'Analisi professionale dei vostri dati di scansione CT.'
    },
  },
  {
    slug: 'scanexpress',
    name: {
      de: 'SCANEXPRESS — Mobiles CT',
      en: 'SCANEXPRESS — Mobile CT',
      fr: 'SCANEXPRESS — CT mobile',
      es: 'SCANEXPRESS — CT móvil',
      it: 'SCANEXPRESS — CT mobile'
    },
    desc: {
      de: 'Mobiles industrielles CT direkt bei Ihnen vor Ort.',
      en: 'Mobile industrial CT directly at your location.',
      fr: 'CT industriel mobile directement sur votre site.',
      es: 'CT industrial móvil directamente en sus instalaciones.',
      it: 'CT industriale mobile direttamente presso la vostra sede.'
    },
  },
];

const t = {
  de: {
    title: 'Dienstleistungen',
    subtitle: 'Unsere CT-Dienstleistungen',
    description: 'CT-Labor, mobile CT-Lösungen und Datenauswertung — alles aus einer Hand.',
    learnMore: 'Mehr erfahren',
  },
  en: {
    title: 'Services',
    subtitle: 'Our CT Services',
    description: 'CT laboratory, mobile CT solutions and data analysis — all from one source.',
    learnMore: 'Learn more',
  },
  fr: {
    title: 'Services',
    subtitle: 'Nos services CT',
    description: 'Laboratoire CT, solutions CT mobiles et analyse de données — tout auprès d’un seul partenaire.',
    learnMore: 'En savoir plus',
  },
  es: {
    title: 'Servicios',
    subtitle: 'Nuestros servicios CT',
    description: 'Laboratorio CT, soluciones CT móviles y análisis de datos — todo de una sola fuente.',
    learnMore: 'Más información',
  },
  it: {
    title: 'Servizi',
    subtitle: 'I nostri servizi CT',
    description: 'Laboratorio CT, soluzioni CT mobili e analisi dati — tutto da un unico partner.',
    learnMore: 'Scopri di più',
  }
}[locale] || {
  title: 'Services',
  subtitle: 'Our CT Services',
  description: 'CT laboratory, mobile CT solutions and data analysis — all from one source.',
  learnMore: 'Learn more',
};
---

<BaseLayout title={t.title} description={t.description}>
  <Header slot="header" />

  <div class="services-page">
    <div class="container">
      <Breadcrumbs items={[{ label: t.title }]} />

      <section class="page-hero">
        <h1>{t.subtitle}</h1>
        <p>{t.description}</p>
      </section>

      <div class="services-grid">
        {services.map(service => (
          <a href={lp(`/dienstleistungen/${service.slug}`)} class="service-card">
            <h3>{service.name[locale] || service.name.en || service.name.de}</h3>
            <p>{service.desc[locale] || service.desc.en || service.desc.de}</p>
            <span class="learn-more">{t.learnMore} →</span>
          </a>
        ))}
      </div>
    </div>
  </div>

  <Footer slot="footer" />
</BaseLayout>

<style>
  .services-page { padding-bottom: var(--space-16); }
  .page-hero { text-align: center; padding: var(--space-12) 0; max-width: 700px; margin: 0 auto; }
  .page-hero h1 { font-size: var(--text-4xl); margin-bottom: var(--space-4); }
  .page-hero p { font-size: var(--text-xl); color: var(--text-muted); }
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-6);
    margin-top: var(--space-8);
  }
  .service-card {
    background: var(--surface, #f8fafc);
    border: 1px solid var(--border, #eef2f5);
    border-radius: var(--radius-xl, 12px);
    padding: var(--space-8);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-fast, 150ms);
  }
  .service-card:hover {
    border-color: var(--primary, #32285b);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }
  .service-card h3 { margin-bottom: var(--space-3); color: var(--primary, #32285b); }
  .service-card p { color: var(--text-muted); margin-bottom: var(--space-4); line-height: 1.6; }
  .learn-more { color: var(--accent, #ee7711); font-weight: 600; font-size: var(--text-sm); }
</style>
